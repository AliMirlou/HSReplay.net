{% extends "base.html" %}
{% load static from staticfiles %}
{% block content %}
<div class="container-fluid">
	<div class="row">
		<div class="col-xs-12">
<div class="row">
	<div class="col-xs-12">
		<h3>Upload Replay Files</h3>
		<p>Once you have acquired an upload token for your user, you can use it along with your API key to upload HSReplay
		files on their behalf. In addition to the standard <code>x-hsreplay-api-key</code> header, when you upload a
		replay for a user you must set their upload token as the <code>x-hsreplay-upload-token</code> header value. The
		raw replay XML data should be placed in the body of the POST request.</p>
		<br/>
		<p>NOTE: When submitting API requests to upload replays you must specifically send the
		request to the <code>https://upload.hsreplay.net</code> host domain (using HTTPS). This sub-domain sits in front
		of the highly scalable infrastructure that hsreplay.net uses to handle the volume of concurrent HSReplay uploads.</p>
		<br/>
		<p>The raw replay XML data itself must conform to the <a href="https://github.com/HearthSim/HSReplay">HSReplay Specification</a>.
		The specification Github repository provides an HSReplay python implementation which can be run separately or embedded
			within your application.</p>
		<pre>
			POST /api/v1/replay/upload/ HTTPS/1.1
			Host: upload.hsreplay.net
			x-hsreplay-api-key: [API_KEY]
			x-hsreplay-upload-token: [TOKEN]

			&lt;HSReplay version="1.0"&gt;
				&lt;Game ts="2016-02-06T04:50:33" type="7"&gt;
					&lt;GameEntity id="1"&gt;
						&lt;Tag tag="10" value="85" /&gt;
						&lt;Tag tag="20" value="1" /&gt;
						&lt;!-- Additional HSReplay Data --&gt;
				&lt;/Game&gt;
			&lt;/HSReplay&gt;
		</pre>
		<p>If the replay was successfully uploaded, then the server will respond with the HTTP code 201. All replay files are
		assigned a UUID on upload that can be used to perform other API operations on the replay. The UUID is available
		directly in the JSON of the response body.</p>
		<pre>
			HTTP/1.1 201 CREATED
			Date: Mon, 8 February 2016 22:38:34 GMT

			{
				"replay_uuid": [UUID]
			}
		</pre>
	</div>
</div>

<div class="row">
	<div class="col-xs-12">
		<h3>Interact With Uploaded Replay Files</h3>
		<p>The amount of time for which HSReplay.net keeps uploaded replays available can be configured for each generated upload
			token. See the API documentation sections on account management for further details. In order to retrieve the
			status of a previously uploaded replay, a GET request should be sent to <code>/api/v1/replay/[UUID]/</code>. The
			two standard <code>x-hsrepay-*</code> headers must be included, as in the example below.</p>
		<pre>
			GET /api/v1/replay/27258f76-c180-4b4f-99e4-8ad949a17eb7/ HTTP/1.1
			Host: hsreplay.net
			x-hsreplay-api-key: [API_KEY]
			x-hsreplay-upload-token: [TOKEN]
		</pre>
		<p>The server will respond with a JSON object that provides further details about the replay. The
			<code>replay_uuid</code> and <code>status</code> fields are always included. All other fields are only included
			when the replay status is available.</p>
		<dl class="dl-horizontal">
		  <dt>replay_uuid</dt>
		  <dd><em>Always included in the response.</em> The UUID of the replay.</dd>
		  <dt>status</dt>
		  <dd><em>Always included in the response.</em> The status will either be <strong>AVAILABLE</strong> or <strong>ARCHIVED</strong>.
			  If the replay is available then additional retrieval fields will also be present in the response. If the replay is
			  archived then the user must first change their account settings to increase the replay availability period on their account.
			  Once the availability period has been increased the replay will return to the available status.
		  </dd>
		  <dt>raw_xml</dt>
		  <dd>An URL that can be used to retrieve the originally uploaded XML data.</dd>
		  <dt>view_replay_sharable</dt>
		  <dd>An URL that can be used by a browser to watch the replay on the HSReplay.net website. Although HSReplay.net provides
			  functionality for making replays publicly viewable and discoverable, the URL returned by this response should be assumed
			  to be opaque, as that will often be the case for private replays. However, anyone who knows the opaque URL can
			  still use it to view the replay. This is intended to allow users to share replays with friends while still
			  maintaining their privacy.</dd>
		</dl>
		<pre>
			HTTP/1.1 200 OK
			Date: Mon, 8 February 2016 23:17:52 GMT

			{
				"replay_uuid": [UUID],
				"status": ["AVAILABLE" | "ARCHIVED"],
				"raw_xml": [URL],
				"view_replay_sharable": [URL]
			}
		</pre>
	</div>
</div>
		</div>
	</div>
</div>

{% endblock content %}

